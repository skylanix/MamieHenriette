{% extends "template.html" %}

{% block content %}
<div class="mb-6">
	<h1 class="text-2xl font-semibold text-slate-800 dark:text-white mb-1">ProtonDB</h1>
	<p class="text-sm text-slate-600 dark:text-slate-400">
		Compatibilité des jeux Windows sur Linux via Steam Play.
	</p>
</div>

{% if configuration.getValue('proton_db_enable_enable') %}
<div class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden mb-6">
	<div class="px-5 py-4 border-b border-slate-200 dark:border-slate-700">
		<h2 class="text-lg font-medium text-slate-800 dark:text-white">Alias de jeux</h2>
	</div>
	<div class="overflow-x-auto">
		<table class="w-full">
			<thead>
				<tr class="bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700">
					<th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Alias</th>
					<th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Nom du jeu</th>
					<th class="px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Actions</th>
				</tr>
			</thead>
			<tbody class="divide-y divide-slate-200 dark:divide-slate-700">
				{% for a in aliases %}
				<tr class="hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors">
					<td class="px-4 py-3">
						<code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-mono">{{ a.alias }}</code>
					</td>
					<td class="px-4 py-3 text-sm text-slate-600 dark:text-slate-400">
						{{ a.name }}
					</td>
					<td class="px-4 py-3 text-right">
						<a href="{{ url_for('delGameAlias', id = a.id) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet alias ?')" class="text-sm text-slate-500 hover:text-red-600 dark:hover:text-red-400 transition-colors">
							Supprimer
						</a>
					</td>
				</tr>
				{% else %}
				<tr>
					<td colspan="3" class="px-4 py-8 text-center text-sm text-slate-500 dark:text-slate-400">
						Aucun alias configuré
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

<div class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-5 mb-6">
	<h2 class="text-lg font-medium text-slate-800 dark:text-white mb-5">Ajouter un alias</h2>
	
	<form action="{{ url_for('addGameAlias') }}" method="POST" class="space-y-6">
		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
			<div>
				<label for="alias" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Alias</label>
				<input type="text" name="alias" id="alias" maxlength="32" required placeholder="GTA" class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all">
			</div>
			<div>
				<label for="name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Nom complet</label>
				<input type="text" name="name" id="name" maxlength="256" required placeholder="Grand Theft Auto" class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all">
			</div>
		</div>
		
		<div class="flex justify-end">
			<button type="submit" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors">
				Ajouter
			</button>
		</div>
	</form>

	<div class="mt-5 bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4">
		<p class="text-sm text-slate-600 dark:text-slate-400">
			<strong class="text-slate-800 dark:text-white">Exemple :</strong> Si vous créez un alias GTA → Grand Theft Auto, alors !protondb GTA 5 fera une recherche sur Grand Theft Auto 5.
		</p>
	</div>
</div>
{% endif %}

<div class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden">
	<div class="px-5 py-4 border-b border-slate-200 dark:border-slate-700">
		<h2 class="text-lg font-medium text-slate-800 dark:text-white">Configuration</h2>
	</div>
	
	<form action="{{ url_for('updateConfiguration') }}" method="POST" class="p-5 space-y-6">
		<label class="flex items-center gap-3 cursor-pointer">
			<input type="checkbox" name="proton_db_enable_enable" {% if configuration.getValue('proton_db_enable_enable') %}checked{% endif %} class="w-4 h-4 text-slate-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-slate-500">
			<span class="text-sm text-slate-700 dark:text-slate-300">Activer la commande ProtonDB</span>
		</label>

		<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
			<div>
				<label for="proton_db_api_id" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">API ID</label>
				<input type="text" name="proton_db_api_id" id="proton_db_api_id" value="{{ configuration.getValue('proton_db_api_id') }}" class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all">
			</div>
			<div>
				<label for="proton_db_api_key" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Clé API</label>
				<input type="text" name="proton_db_api_key" id="proton_db_api_key" value="{{ configuration.getValue('proton_db_api_key') }}" class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all">
			</div>
		</div>

		<button type="submit" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors">
			Enregistrer
		</button>
	</form>

	<div class="px-5 pb-5">
		<div class="bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4">
			<p class="text-sm font-medium text-slate-800 dark:text-white mb-2">Comment trouver les clés API ?</p>
			<ol class="list-decimal list-inside space-y-1 text-sm text-slate-600 dark:text-slate-400">
				<li>Ouvrez l'outil d'inspection de votre navigateur (F12)</li>
				<li>Allez dans l'onglet Réseau/Network</li>
				<li>Faites une recherche de jeu sur ProtonDB</li>
				<li>Cherchez les clés dans les requêtes réseau</li>
			</ol>
			<a href="/static/img/algolia-key.jpg" target="_blank" class="inline-block mt-3 text-sm text-slate-600 dark:text-slate-400 hover:underline">
				Voir l'exemple en image
			</a>
		</div>
	</div>
</div>
{% endblock %}
