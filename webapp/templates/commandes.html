{% extends "template.html" %}

{% block content %}
<div class="mb-6">
	<h1 class="text-2xl font-semibold text-slate-800 dark:text-white mb-1">Commandes</h1>
	<p class="text-sm text-slate-600 dark:text-slate-400">
		Gérez les commandes personnalisées du bot. Ces commandes peuvent être activées sur Discord et/ou Twitch.
	</p>
</div>

<div class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden mb-6">
	<div class="overflow-x-auto">
		<table class="w-full">
			<thead>
				<tr class="bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700">
					<th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Commande</th>
					<th class="px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Réponse</th>
					<th class="px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Discord</th>
					<th class="px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Twitch</th>
					<th class="px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase">Actions</th>
				</tr>
			</thead>
			<tbody class="divide-y divide-slate-200 dark:divide-slate-700">
				{% for commande in commandes %}
				<tr class="hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors">
					<td class="px-4 py-3">
						<code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-mono">{{ commande.trigger }}</code>
					</td>
					<td class="px-4 py-3 text-slate-600 dark:text-slate-400 text-sm max-w-xs">
						<div class="line-clamp-2">{{ commande.response }}</div>
					</td>
					<td class="px-4 py-3 text-center">
						<a href="{{ url_for('toggle_discord_commande', commande_id = commande.id) }}" class="inline-flex" title="{{ 'Désactiver' if commande.discord_enable else 'Activer' }}">
							{% if commande.discord_enable %}
							<span class="w-5 h-5 text-green-600 dark:text-green-500">✓</span>
							{% else %}
							<span class="w-5 h-5 text-slate-400">–</span>
							{% endif %}
						</a>
					</td>
					<td class="px-4 py-3 text-center">
						<a href="{{ url_for('toggle_twitch_commande', commande_id = commande.id) }}" class="inline-flex" title="{{ 'Désactiver' if commande.twitch_enable else 'Activer' }}">
							{% if commande.twitch_enable %}
							<span class="w-5 h-5 text-green-600 dark:text-green-500">✓</span>
							{% else %}
							<span class="w-5 h-5 text-slate-400">–</span>
							{% endif %}
						</a>
					</td>
					<td class="px-4 py-3 text-right">
						<a href="{{ url_for('delete_commande', commande_id = commande.id) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette commande ?')" class="text-sm text-slate-500 hover:text-red-600 dark:hover:text-red-400 transition-colors">
							Supprimer
						</a>
					</td>
				</tr>
				{% else %}
				<tr>
					<td colspan="5" class="px-4 py-8 text-center text-sm text-slate-500 dark:text-slate-400">
						Aucune commande configurée
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

<div class="bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-5">
	<h2 class="text-lg font-medium text-slate-800 dark:text-white mb-5">Ajouter une commande</h2>
	
	<form action="{{ url_for('add_commande') }}" method="POST" class="space-y-6">
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			<div>
				<label for="trigger" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Commande</label>
				<input type="text" name="trigger" id="trigger" placeholder="!macommande" class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all">
			</div>
			<div class="flex items-end gap-6">
				<label class="flex items-center gap-3 cursor-pointer">
					<input type="checkbox" name="discord_enable" checked class="w-4 h-4 text-slate-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-slate-500 focus:ring-2">
					<span class="text-sm text-slate-700 dark:text-slate-300">Discord</span>
				</label>
				<label class="flex items-center gap-3 cursor-pointer">
					<input type="checkbox" name="twitch_enable" class="w-4 h-4 text-slate-600 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 rounded focus:ring-slate-500 focus:ring-2">
					<span class="text-sm text-slate-700 dark:text-slate-300">Twitch</span>
				</label>
			</div>
		</div>
		
		<div>
			<label for="response" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Réponse</label>
			<textarea name="response" id="response" rows="4" placeholder="Le message que le bot enverra..." class="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all resize-none"></textarea>
		</div>
		
		<div class="flex justify-end">
			<button type="submit" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors">
				Ajouter
			</button>
		</div>
	</form>
</div>
{% endblock %}
