{% extends "template.html" %}

{% block content %}
<h1>Mod√©ration Discord</h1>

<p>
	Historique des actions de mod√©ration effectu√©es sur le serveur Discord.

	Le bot enregistre automatiquement les avertissements, exclusions et bannissements.

	<table>
		<thead>
			<tr>
				<th>Commande</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td><strong>!averto @utilisateur raison</strong><br><small>Alias : !warn, !av, !avertissement</small></td>
				<td>Avertit un utilisateur et enregistre l'avertissement dans la base de donn√©es</td>
			</tr>
			<tr>
				<td><strong>!delaverto id</strong><br><small>Alias : !removewarn, !delwarn</small></td>
				<td>Retire un avertissement en utilisant son num√©ro d'ID</td>
			</tr>
			<tr>
				<td><strong>!warnings</strong> ou <strong>!warnings @utilisateur</strong><br><small>Alias : !listevent, !listwarn</small></td>
				<td>Affiche la liste des √©v√©nements de mod√©ration (tous ou pour un utilisateur sp√©cifique)</td>
			</tr>
			<tr>
				<td><strong>!inspect @utilisateur</strong> ou <strong>!inspect id</strong></td>
				<td>Affiche des informations d√©taill√©es sur un utilisateur : cr√©ation du compte, date d'arriv√©e, historique de mod√©ration</td>
			</tr>
			<tr>
				<td><strong>!kick @utilisateur raison</strong></td>
				<td>Expulse un utilisateur du serveur</td>
			</tr>
			<tr>
				<td><strong>!ban @utilisateur raison</strong></td>
				<td>Bannit d√©finitivement un utilisateur du serveur</td>
			</tr>
			<tr>
				<td><strong>!unban discord_id</strong> ou <strong>!unban #sanction_id raison</strong></td>
				<td>R√©voque le bannissement d'un utilisateur et lui envoie une invitation</td>
			</tr>
			<tr>
				<td><strong>!banlist</strong></td>
				<td>Affiche la liste des utilisateurs actuellement bannis du serveur</td>
			</tr>
			<tr>
				<td><strong>!aide</strong><br><small>Alias : !help</small></td>
				<td>Affiche l'aide avec toutes les commandes disponibles</td>
			</tr>
		</tbody>
	</table>
</p>

{% if not event %}
<h2>√âv√©nements de mod√©ration</h2>
<table class="moderation">
	<thead>
		<tr>
			<th>Type</th>
			<th>Utilisateur</th>
			<th>Discord ID</th>
			<th>Date & Heure</th>
			<th>Raison</th>
			<th>Staff</th>
			<th>#</th>
		</tr>
	</thead>
	<tbody>
		{% for mod_event in events %}
		<tr>
			<td>{{ mod_event.type }}</td>
			<td>{{ mod_event.username }}</td>
			<td>{{ mod_event.discord_id }}</td>
			<td>{{ mod_event.created_at.strftime('%d/%m/%Y %H:%M') if mod_event.created_at else 'N/A' }}</td>
			<td>{{ mod_event.reason }}</td>
			<td>{{ mod_event.staff_name }}</td>
			<td>
				<a href="{{ url_for('open_edit_moderation_event', event_id = mod_event.id) }}" class="icon">‚úê</a>
				<a href="{{ url_for('delete_moderation_event', event_id = mod_event.id) }}" onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer cet √©v√©nement ?')" class="icon">üóë</a>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endif %}

{% if event %}
<h2>Editer un √©v√©nement</h2>
<form action="{{ url_for('update_moderation_event', event_id = event.id) }}" method="POST">
	<label for="type">Type</label>
	<input name="type" type="text" value="{{ event.type }}" disabled />
	<label for="username">Utilisateur</label>
	<input name="username" type="text" value="{{ event.username }}" disabled />
	<label for="discord_id">Discord ID</label>
	<input name="discord_id" type="text" value="{{ event.discord_id }}" disabled />
	<label for="reason">Raison</label>
	<input name="reason" type="text" value="{{ event.reason }}" required="required" />
	<label for="staff_name">Staff</label>
	<input name="staff_name" type="text" value="{{ event.staff_name }}" disabled />
	<input type="Submit" value="Modifier">
	<a href="{{ url_for('moderation') }}">Annuler</a>
</form>
{% endif %}

{% endblock %}
