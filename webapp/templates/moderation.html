{% extends "template.html" %}

{% block content %}
<h1>ModÃ©ration Discord</h1>
<p>Historique des actions de modÃ©ration sur le serveur Discord.</p>
<table>
	<thead>
		<tr>
			<th>ID</th>
			<th>Type</th>
			<th>Utilisateur</th>
			<th>Discord ID</th>
			<th>Date & Heure</th>
			<th>Raison</th>
			<th>Staff</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody>
		{% for event in events %}
		<tr>
			<td>{{ event.id }}</td>
			<td>{{ event.type }}</td>
			<td>{{ event.username }}</td>
			<td>{{ event.discord_id }}</td>
			<td>{{ event.created_at.strftime('%d/%m/%Y %H:%M') if event.created_at else 'N/A' }}</td>
			<td>
				<form action="{{ url_for('update_moderation_event', event_id = event.id) }}" method="POST" style="margin: 0;">
					<input name="reason" type="text" value="{{ event.reason }}" style="width: 100%;" />
				</form>
			</td>
			<td>{{ event.staff_name }}</td>
			<td>
				<a href="javascript:void(0)" onclick="this.parentElement.parentElement.querySelector('form').submit()">Modifier</a>
				| 
				<a href="{{ url_for('delete_moderation_event', event_id = event.id) }}" onclick="return confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cet Ã©vÃ©nement ?')">ğŸ—‘ï¸ Supprimer</a>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}


