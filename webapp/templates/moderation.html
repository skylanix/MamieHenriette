{% extends "template.html" %}

{% block content %}
<h1>Mod√©ration Discord</h1>

<p>
	Historique des actions de mod√©ration effectu√©es sur le serveur Discord.

	Le bot enregistre automatiquement les avertissements, exclusions et bannissements.
	Exemples de commandes :
	<ul>
		<li><strong>!kick @utilisateur raison</strong> - !kick @Jean Spam de liens</li>
		<li><strong>!ban @utilisateur raison</strong> - !ban @Marie Comportement toxique r√©p√©t√©</li>
		<li><strong>!warn @utilisateur raison</strong> - !warn @Paul Langage inappropri√©</li>
		<li><strong>!unwarn @utilisateur</strong> - !unwarn @Paul</li>
	</ul>
</p>

{% if not event %}
<h2>√âv√©nements de mod√©ration</h2>
<table class="moderation">
	<thead>
		<tr>
			<th>Type</th>
			<th>Utilisateur</th>
			<th>Discord ID</th>
			<th>Date & Heure</th>
			<th>Raison</th>
			<th>Staff</th>
			<th>#</th>
		</tr>
	</thead>
	<tbody>
		{% for mod_event in events %}
		<tr>
			<td>{{ mod_event.type }}</td>
			<td>{{ mod_event.username }}</td>
			<td>{{ mod_event.discord_id }}</td>
			<td>{{ mod_event.created_at.strftime('%d/%m/%Y %H:%M') if mod_event.created_at else 'N/A' }}</td>
			<td>{{ mod_event.reason }}</td>
			<td>{{ mod_event.staff_name }}</td>
			<td>
				<a href="{{ url_for('open_edit_moderation_event', event_id = mod_event.id) }}" class="icon">‚úê</a>
				<a href="{{ url_for('delete_moderation_event', event_id = mod_event.id) }}" onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer cet √©v√©nement ?')" class="icon">üóë</a>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endif %}

{% if event %}
<h2>Editer un √©v√©nement</h2>
<form action="{{ url_for('update_moderation_event', event_id = event.id) }}" method="POST">
	<label for="type">Type</label>
	<input name="type" type="text" value="{{ event.type }}" disabled />
	<label for="username">Utilisateur</label>
	<input name="username" type="text" value="{{ event.username }}" disabled />
	<label for="discord_id">Discord ID</label>
	<input name="discord_id" type="text" value="{{ event.discord_id }}" disabled />
	<label for="reason">Raison</label>
	<input name="reason" type="text" value="{{ event.reason }}" required="required" />
	<label for="staff_name">Staff</label>
	<input name="staff_name" type="text" value="{{ event.staff_name }}" disabled />
	<input type="Submit" value="Modifier">
	<a href="{{ url_for('moderation') }}">Annuler</a>
</form>
{% endif %}

{% endblock %}
